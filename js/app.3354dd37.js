(function(){"use strict";var t={9924:function(t,e,i){i.d(e,{Z:function(){return d}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"modal-dialog"},[e("div",{staticClass:"modal-dialog-header"},[e("h2",{staticClass:"modal-dialog-header-title"},[t._t("header")],2),e("button",{staticClass:"modal-dialog-header-button",attrs:{type:"button"},on:{click:t.closeClick}},[t._v(" Ã— ")])]),e("div",{staticClass:"modal-dialog-content"},[t._t("default")],2)])},n=[],o={name:"ModalDialog",emits:["close"],methods:{closeClick(){this.$emit("close")}}},r=o,a=i(1001),l=(0,a.Z)(r,s,n,!1,null,"c9083038",null),d=l.exports},5936:function(t,e,i){var s=i(6369),n=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("nav",[e("router-link",{attrs:{to:"/"}},[t._v("Trading Desk")]),t._v(" | "),e("router-link",{attrs:{to:"/transactions"}},[t._v("Bitcoin Transactions")])],1),e("router-view")],1)},o=[],r=i(1001),a={},l=(0,r.Z)(a,n,o,!1,null,null,null),d=l.exports,c=i(2631),h=function(){var t=this,e=t._self._c;return e("div",{staticClass:"trading-desk-view"},[e("h1",[t._v("Trading desk")]),e("trading-desk",{ref:"desk",on:{"position-change":t.setTilePosition,"end-position-change":t.saveTiles},scopedSlots:t._u([{key:"actions",fn:function(){return[e("div",{staticClass:"trading-desk-actions"},[t.hiddenTiles.length?e("button",{staticClass:"trading-desk-actions-button",attrs:{type:"button"},on:{click:t.openModal}},[t._v(" + Return tile to trading desk ")]):t._e(),e("button",{staticClass:"trading-desk-actions-button",attrs:{type:"button"},on:{click:t.resetTiles}},[t._v(" Reset desk ")])])]},proxy:!0}])},t._l(t.shownTiles,(function(i,s){return e("trading-desk-tile",{key:i.id,on:{"activate-tile":t.activateTile,"close-tile":t.saveTiles,"tile-resized":t.saveTiles},model:{value:t.shownTiles[s],callback:function(e){t.$set(t.shownTiles,s,e)},expression:"shownTiles[index]"}})})),1),e("modal-dialog",{directives:[{name:"show",rawName:"v-show",value:t.modalIsShown,expression:"modalIsShown"}],on:{close:t.closeModal},scopedSlots:t._u([{key:"header",fn:function(){return[t._v(" Return tale on Trading Desk ")]},proxy:!0}])},[e("div",[e("p",[t._v("Select a tile from the list to return it to the Desk")]),e("trading-desk-tiles-list",{attrs:{tiles:t.hiddenTiles},on:{"tile-click":t.showTile}})],1)])],1)},u=[],f=i(2482),v=i(878),g=i(8829),p=i(2575);i(7658);class m{constructor(t,e,i,s=300,n=100,o=null){if((0,f.Z)(this,"id",void 0),(0,f.Z)(this,"title",void 0),(0,f.Z)(this,"isShown",!0),(0,f.Z)(this,"isActive",!1),(0,f.Z)(this,"width",void 0),(0,f.Z)(this,"height",void 0),(0,f.Z)(this,"x",void 0),(0,f.Z)(this,"y",void 0),(0,f.Z)(this,"zIndex",1),this.id=t,this.title=`Tile ${this.id+1}`,this.setSize(s,n),this.setPosition(e,i),o)for(const r in o)Object.hasOwn(this,r)&&(this[r]=o[r])}activate(){return this.isActive=!0,this}deactivate(){return this.isActive=!1,this}show(){return this.isShown=!0,this}hide(){return this.isShown=!1,this}setSize(t,e){return this.width=t,this.height=e,this}setPosition(t,e){return this.x=t,this.y=e,this}setZIndex(t){return this.zIndex=t,this}}var w=new WeakMap,T=new WeakMap,k=new WeakMap,Z=new WeakMap,b=new WeakMap,y=new WeakMap,_=new WeakMap,x=new WeakMap;class C{constructor(t,e,i=5,s=[]){if((0,v.Z)(this,w,{writable:!0,value:void 0}),(0,v.Z)(this,T,{writable:!0,value:void 0}),(0,v.Z)(this,k,{writable:!0,value:void 0}),(0,v.Z)(this,Z,{writable:!0,value:300}),(0,v.Z)(this,b,{writable:!0,value:100}),(0,v.Z)(this,y,{writable:!0,value:void 0}),(0,v.Z)(this,_,{writable:!0,value:10}),(0,v.Z)(this,x,{writable:!0,value:1}),(0,f.Z)(this,"list",[]),(0,p.Z)(this,w,i),(0,p.Z)(this,T,t),(0,p.Z)(this,k,e),(0,p.Z)(this,y,this.calcTilesInLine()),s&&s.length)return this.uploadList(s),void(0,p.Z)(this,x,this.findMaxZIndex());this.fillList()}calcTilesInLine(){return Math.floor((0,g.Z)(this,T)/((0,g.Z)(this,Z)+(0,g.Z)(this,_)))}fillList(){for(let t=0;t<(0,g.Z)(this,w);t+=1){const{left:e,top:i}=this.calcTilePosition(t),s=new m(t,e,i,(0,g.Z)(this,Z),(0,g.Z)(this,b));this.list.push(s)}}uploadList(t){this.list=t.map((({id:t,width:e,height:i,x:s,y:n,...o})=>new m(t,s,n,e,i,o)))}findMaxZIndex(){return this.list.reduce(((t,{zIndex:e})=>e>t?e:t),0)}calcTilePosition(t){let e=Math.ceil((t+1)/(0,g.Z)(this,y))-1,i=(0,g.Z)(this,y)*e,s=this.calcTileLeftPosition(t-i),n=((0,g.Z)(this,b)+(0,g.Z)(this,_))*e;return{left:s,top:n}}calcTileLeftPosition(t){return t*(0,g.Z)(this,Z)+(0,g.Z)(this,_)*t}setActiveTile(t){this.adjustZIndexs(),this.list.map((e=>{var i;return e.id!==t?e.deactivate():!1===e.isActive?e.activate().setZIndex((0,p.Z)(this,x,(i=(0,g.Z)(this,x),++i))):e}))}getShownTiles(){return this.list.filter((({isShown:t})=>t))}getHiddenTiles(){return this.list.filter((({isShown:t})=>!t))}showTileById(t){const e=this.list.find((e=>e.id===t)),i=(0,g.Z)(this,T)/2-(0,g.Z)(this,Z)/2,s=(0,g.Z)(this,k)/2-(0,g.Z)(this,b)/2;e.show().setSize((0,g.Z)(this,Z),(0,g.Z)(this,b)).setPosition(i,s),this.setActiveTile(t)}adjustZIndexs(){(0,g.Z)(this,x)<(0,g.Z)(this,w)-1||(this.list.map((t=>t.zIndex>1?t.setZIndex(t.zIndex-1):t.setZIndex(1))),(0,p.Z)(this,x,(0,g.Z)(this,w)))}}class S{static saveTiles(t){localStorage.setItem("tiles",JSON.stringify(t))}static getTiles(){return JSON.parse(localStorage.getItem("tiles"))}static removeTiles(){localStorage.removeItem("tiles")}}var P=function(){var t=this,e=t._self._c;return e("div",{staticClass:"trading-desk"},[e("div",{staticClass:"trading-desk-tiles"},[e("drag-and-drop-area",{on:{"el-end-drag":t.getElEndPosition,"el-drag":t.getElPosition}},[t._t("default")],2)],1),e("div",{staticClass:"tradig-dest-actions"},[t._t("actions")],2)])},E=[],I=function(){var t=this,e=t._self._c;return e("div",{ref:"container",staticClass:"drag-and-drop-area",on:{drag:t.drag,dragstart:t.startDrag,dragend:t.endDrag,dragover:function(t){t.preventDefault()},dragenter:function(t){t.preventDefault()}}},[t._t("default")],2)},M=[];const z=(t,e,i=10)=>{const s=Math.ceil(t/i)*i,n=Math.ceil(e/i)*i;return{steppedX:s,steppedY:n}};var A={name:"DragAndDropArea",data(){return{containerEl:null,targetEl:null,dragginElStartPosition:null,dragginElEndPosition:null,cursorStartPosition:null,cursorEndPosition:null}},emits:["el-end-drag","el-drag"],mounted(){this.containerEl=this.$refs["container"]},methods:{startDrag(t){const{target:e,pageX:i,pageY:s}=t,n=e.offsetLeft,o=e.offsetTop;this.targetEl=e,this.dragginElStartPosition={x:n,y:o},this.cursorStartPosition={x:i,y:s},t.dataTransfer.setDragImage(t.target,window.outerWidth,window.outerHeight)},endDrag(){this.$emit("el-end-drag")},drag(t){const{pageX:e,pageY:i}=t;this.$emit("el-drag",{targetComponent:this.targetEl.__vue__,position:this.calcElPosition(e,i)})},calcElPosition(t,e){const{x:i,y:s}=this.cursorStartPosition,{x:n,y:o}=this.dragginElStartPosition,r=t-i,a=e-s,l=n+r,d=o+a,{offsetWidth:c,offsetHeight:h}=this.targetEl,{clientWidth:u,clientHeight:f}=this.containerEl,{steppedX:v,steppedY:g}=z(l,d);let p,m;return p=v<0?0:v+c>u?u-c:v,m=g<0?0:g+h>f?f-h:g,{x:p,y:m}}}},D=A,O=(0,r.Z)(D,I,M,!1,null,null,null),$=O.exports,j={name:"TradingDesk",components:{"drag-and-drop-area":$},emits:["end-position-chage","position-change"],methods:{getElEndPosition(t){this.$emit("end-position-change",t)},getElPosition(t){this.$emit("position-change",t)}}},L=j,W=(0,r.Z)(L,P,E,!1,null,"240d2f8f",null),N=W.exports,H=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"resize",rawName:"v-resize",value:t.resizeTile,expression:"resizeTile"}],staticClass:"tile",class:{"tile--active":t.tile.isActive},style:t.styles,attrs:{draggable:""},on:{mousedown:t.activateTile}},[e("div",{staticClass:"tile-title"},[e("span",[t._v(t._s(t.tile.title))]),e("button",{staticClass:"tile-remove-button",attrs:{type:"button"},on:{click:t.hideTile}},[t._v("-")])]),e("div",{staticClass:"tile-body"})])},B=[],R={name:"TradingDeskTile",props:["tile"],model:{prop:"tile"},data(){return{newWidth:null,newHeight:null,initCoordinats:{},newCoordinats:null}},computed:{styles:t=>{const{width:e,height:i,x:s,y:n,zIndex:o}=t.tile;return{width:`${e}px`,height:`${i}px`,left:`${s}px`,top:`${n}px`,"z-index":o}}},emits:["activate-tile","close-tile","tile-resized"],methods:{activateTile(){this.$emit("activate-tile",this.tile.id)},hideTile(){this.tile.hide(),this.$emit("close-tile",this.tile.id)},resizeTile({width:t,height:e}){this.tile.setSize(t,e),this.$emit("tile-resized")}}},F=R,X=(0,r.Z)(F,H,B,!1,null,"6ea13d50",null),Y=X.exports,q=function(){var t=this,e=t._self._c;return e("ul",{staticClass:"tiles-list"},t._l(t.tiles,(function(i){return e("li",{key:i.id},[e("button",{staticClass:"tiles-list-tile",attrs:{type:"button"},on:{click:()=>t.onClick(i.id)}},[t._v(t._s(i.title))])])})),0)},J=[],K={name:"TradingDeskTileList",props:{tiles:{type:Array,required:!0}},emits:["tile-click"],methods:{onClick(t){this.$emit("tile-click",t)}}},U=K,V=(0,r.Z)(U,q,J,!1,null,"194b6e0b",null),G=V.exports,Q=i(9924),tt={name:"TradingDeskView",components:{"trading-desk":N,"trading-desk-tile":Y,"trading-desk-tiles-list":G,"modal-dialog":Q.Z},data(){return{tiles:null,modalIsShown:!1}},mounted(){const{offsetWidth:t,offsetHeight:e}=this.$refs["desk"].$el;this.deskWidth=t,this.deskHeight=e;const i=S.getTiles();this.tiles=i?new C(t,e,5,i):new C(t,e)},destroyed(){this.saveTiles()},computed:{shownTiles(){return this.tiles?.getShownTiles()||[]},hiddenTiles(){return this.tiles?.getHiddenTiles()||[]}},methods:{showTile(t){this.tiles.showTileById(t),this.closeModal()},activateTile(t){this.tiles.setActiveTile(t),this.saveTiles()},setTilePosition(t){const{targetComponent:e,position:i}=t,{tile:s}=e,{x:n,y:o}=i;s.setPosition(n,o)},openModal(){this.modalIsShown=!0},closeModal(){this.modalIsShown=!1},saveTiles(){S.saveTiles(this.tiles.list)},resetTiles(){S.removeTiles(),this.tiles=new C(this.deskWidth,this.deskHeight)}}},et=tt,it=(0,r.Z)(et,h,u,!1,null,"92b9c36e",null),st=it.exports;s.ZP.use(c.ZP);const nt=[{path:"/",name:"tradingDesk",component:st},{path:"/transactions",name:"transactions",component:()=>i.e(805).then(i.bind(i,7852))}],ot=new c.ZP({routes:nt});var rt=ot;let at=null;var lt={inserted(t,e){const i=e.value;at=new ResizeObserver((([t])=>{const{contentRect:e}=t,{height:s,width:n}=e;i({height:s,width:n})})),at.observe(t)},unbind(t){at.unobserve(t)}};const dt=t=>{if(!t)return"";const e=1e8,i=t/e;return`${i} BTC`};var ct=dt;s.ZP.config.productionTip=!1,s.ZP.directive("resize",lt),s.ZP.filter("BTC",ct),new s.ZP({router:rt,render:t=>t(d)}).$mount("#app")}},e={};function i(s){var n=e[s];if(void 0!==n)return n.exports;var o=e[s]={exports:{}};return t[s](o,o.exports,i),o.exports}i.m=t,function(){var t=[];i.O=function(e,s,n,o){if(!s){var r=1/0;for(c=0;c<t.length;c++){s=t[c][0],n=t[c][1],o=t[c][2];for(var a=!0,l=0;l<s.length;l++)(!1&o||r>=o)&&Object.keys(i.O).every((function(t){return i.O[t](s[l])}))?s.splice(l--,1):(a=!1,o<r&&(r=o));if(a){t.splice(c--,1);var d=n();void 0!==d&&(e=d)}}return e}o=o||0;for(var c=t.length;c>0&&t[c-1][2]>o;c--)t[c]=t[c-1];t[c]=[s,n,o]}}(),function(){i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,{a:e}),e}}(),function(){i.d=function(t,e){for(var s in e)i.o(e,s)&&!i.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){i.f={},i.e=function(t){return Promise.all(Object.keys(i.f).reduce((function(e,s){return i.f[s](t,e),e}),[]))}}(),function(){i.u=function(t){return"js/transactions.1ab034c8.js"}}(),function(){i.miniCssF=function(t){return"css/transactions.4e0a1389.css"}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={},e="test-assignment:";i.l=function(s,n,o,r){if(t[s])t[s].push(n);else{var a,l;if(void 0!==o)for(var d=document.getElementsByTagName("script"),c=0;c<d.length;c++){var h=d[c];if(h.getAttribute("src")==s||h.getAttribute("data-webpack")==e+o){a=h;break}}a||(l=!0,a=document.createElement("script"),a.charset="utf-8",a.timeout=120,i.nc&&a.setAttribute("nonce",i.nc),a.setAttribute("data-webpack",e+o),a.src=s),t[s]=[n];var u=function(e,i){a.onerror=a.onload=null,clearTimeout(f);var n=t[s];if(delete t[s],a.parentNode&&a.parentNode.removeChild(a),n&&n.forEach((function(t){return t(i)})),e)return e(i)},f=setTimeout(u.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=u.bind(null,a.onerror),a.onload=u.bind(null,a.onload),l&&document.head.appendChild(a)}}}(),function(){i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){i.p="/test-assignment/"}(),function(){var t=function(t,e,i,s){var n=document.createElement("link");n.rel="stylesheet",n.type="text/css";var o=function(o){if(n.onerror=n.onload=null,"load"===o.type)i();else{var r=o&&("load"===o.type?"missing":o.type),a=o&&o.target&&o.target.href||e,l=new Error("Loading CSS chunk "+t+" failed.\n("+a+")");l.code="CSS_CHUNK_LOAD_FAILED",l.type=r,l.request=a,n.parentNode.removeChild(n),s(l)}};return n.onerror=n.onload=o,n.href=e,document.head.appendChild(n),n},e=function(t,e){for(var i=document.getElementsByTagName("link"),s=0;s<i.length;s++){var n=i[s],o=n.getAttribute("data-href")||n.getAttribute("href");if("stylesheet"===n.rel&&(o===t||o===e))return n}var r=document.getElementsByTagName("style");for(s=0;s<r.length;s++){n=r[s],o=n.getAttribute("data-href");if(o===t||o===e)return n}},s=function(s){return new Promise((function(n,o){var r=i.miniCssF(s),a=i.p+r;if(e(r,a))return n();t(s,a,n,o)}))},n={143:0};i.f.miniCss=function(t,e){var i={805:1};n[t]?e.push(n[t]):0!==n[t]&&i[t]&&e.push(n[t]=s(t).then((function(){n[t]=0}),(function(e){throw delete n[t],e})))}}(),function(){var t={143:0};i.f.j=function(e,s){var n=i.o(t,e)?t[e]:void 0;if(0!==n)if(n)s.push(n[2]);else{var o=new Promise((function(i,s){n=t[e]=[i,s]}));s.push(n[2]=o);var r=i.p+i.u(e),a=new Error,l=function(s){if(i.o(t,e)&&(n=t[e],0!==n&&(t[e]=void 0),n)){var o=s&&("load"===s.type?"missing":s.type),r=s&&s.target&&s.target.src;a.message="Loading chunk "+e+" failed.\n("+o+": "+r+")",a.name="ChunkLoadError",a.type=o,a.request=r,n[1](a)}};i.l(r,l,"chunk-"+e,e)}},i.O.j=function(e){return 0===t[e]};var e=function(e,s){var n,o,r=s[0],a=s[1],l=s[2],d=0;if(r.some((function(e){return 0!==t[e]}))){for(n in a)i.o(a,n)&&(i.m[n]=a[n]);if(l)var c=l(i)}for(e&&e(s);d<r.length;d++)o=r[d],i.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return i.O(c)},s=self["webpackChunktest_assignment"]=self["webpackChunktest_assignment"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=i.O(void 0,[998],(function(){return i(5936)}));s=i.O(s)})();
//# sourceMappingURL=app.3354dd37.js.map