{"version":3,"file":"js/transactions.1ab034c8.js","mappings":"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","sources":["webpack://test-assignment/./src/views/TransactionsView.vue","webpack://test-assignment/./src/utils/transactions.js","webpack://test-assignment/./src/API/WebSocketAPI.js","webpack://test-assignment/./src/services/TransactionsService.js","webpack://test-assignment/./src/components/transactions/TransactionsActions.vue","webpack://test-assignment/src/components/transactions/TransactionsActions.vue","webpack://test-assignment/./src/components/transactions/TransactionsActions.vue?505c","webpack://test-assignment/./src/components/transactions/TransactionsActions.vue?47f5","webpack://test-assignment/./src/components/transactions/TransactionsSum.vue","webpack://test-assignment/src/components/transactions/TransactionsSum.vue","webpack://test-assignment/./src/components/transactions/TransactionsSum.vue?5194","webpack://test-assignment/./src/components/transactions/TransactionsSum.vue?176d","webpack://test-assignment/./src/components/transactions/TransactionsTable.vue","webpack://test-assignment/src/components/transactions/TransactionsTable.vue","webpack://test-assignment/./src/components/transactions/TransactionsTable.vue?c43b","webpack://test-assignment/./src/components/transactions/TransactionsTable.vue?6b32","webpack://test-assignment/src/views/TransactionsView.vue","webpack://test-assignment/./src/views/TransactionsView.vue?a438","webpack://test-assignment/./src/views/TransactionsView.vue?77a0"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"transactionss\"},[_c('h1',[_vm._v(\"Bitcoin Transactions\")]),_c('transactions-actions',{on:{\"start\":_vm.start,\"stop\":_vm.stop,\"reset\":_vm.reset}}),(_vm.transactions.length)?_c('transactions-sum',{attrs:{\"sum\":_vm.sum}}):_vm._e(),(_vm.transactions.length)?_c('transactions-table',{attrs:{\"transactions\":_vm.transactions}}):_vm._e(),_c('modal-dialog',{directives:[{name:\"show\",rawName:\"v-show\",value:(!!_vm.alerts.length),expression:\"!!alerts.length\"}],on:{\"close\":_vm.closeModal},scopedSlots:_vm._u([{key:\"header\",fn:function(){return [_vm._v(\" Blockchain Connection Alerts \")]},proxy:true}])},[_c('div',_vm._l((_vm.alerts),function({id, type, message}){return _c('div',{key:id},[_vm._v(\" \"+_vm._s(type)+\": \"+_vm._s(message)+\" \")])}),0)])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","const getInputsInfo = (inputs) => {\r\n  const inputsAddresses = [];\r\n  let sumInputsValue = 0;\r\n\r\n  for (let input of inputs) {\r\n    const { addr, value } = input.prev_out;\r\n    inputsAddresses.push(addr);\r\n    sumInputsValue += value;\r\n  }\r\n\r\n  return {\r\n    inputsAddresses,\r\n    sumInputsValue\r\n  }\r\n}\r\n\r\nconst getOutInfo = (outs) => {\r\n  const outAddresses = [];\r\n  let sumOutValue = 0;\r\n\r\n  for (let out of outs) {\r\n    const { addr, value } = out;\r\n    outAddresses.push(addr);\r\n    sumOutValue += value;\r\n  }\r\n\r\n  return {\r\n    outAddresses,\r\n    sumOutValue\r\n  }\r\n}\r\n\r\nexport const formatTransactionData = (transactionData) => {\r\n  if (!transactionData.x) return false;\r\n  const { inputs, out } = transactionData.x;\r\n  const { inputsAddresses, sumInputsValue } = getInputsInfo(inputs);\r\n  const { outAddresses, sumOutValue } = getOutInfo(out);\r\n  const profit = sumInputsValue - sumOutValue;\r\n \r\n  return {\r\n    from: inputsAddresses,\r\n    to: outAddresses,\r\n    sum: profit\r\n  }\r\n}","export default class WebSocketAPI {\r\n  #socket = null;\r\n\r\n  constructor(url) {\r\n    this.url = url;\r\n  }\r\n\r\n  connect() {\r\n    this.#socket = new WebSocket(this.url);\r\n\r\n    return new Promise((resolve, reject) => {\r\n      this.#socket.onopen = () => {\r\n        if (this.#socket.readyState === WebSocket.OPEN) {\r\n          resolve('connected');\r\n        }\r\n        reject('rejected');\r\n      };\r\n    });\r\n  }\r\n\r\n  send(message) {\r\n    const messageJSON = JSON.stringify(message);\r\n    this.#socket.send(messageJSON);\r\n  }\r\n\r\n  close() {\r\n    this.#socket.close();\r\n  }\r\n\r\n  onMessage(callback) {\r\n    this.#socket.onmessage = (e) => {\r\n      if (e.data) {\r\n        const data = JSON.parse(e.data);\r\n        callback(data);\r\n      }\r\n    }\r\n  }\r\n\r\n  onClose(callback) {\r\n    this.#socket.onclose = (e) => {\r\n      let message;\r\n\r\n      if (e.wasClean) {\r\n        message = 'Connection closed cleanly';\r\n      } else {\r\n        message = 'Connection failure';\r\n      }\r\n\r\n      console.log(`Code: ${e.code} cause: ${e.reason}`);\r\n      callback({\r\n        type: 'close',\r\n        message\r\n      });\r\n    };\r\n  }\r\n\r\n  onError(callback) {\r\n    this.#socket.onerror = (error) => {\r\n      callback({\r\n        type: 'error',\r\n        message: error.message\r\n      })\r\n    }\r\n  }\r\n}","import WebSocketAPI from \"@/API/WebSocketAPI\";\r\n\r\nexport default class TransactionsService {\r\n  #url = 'wss://ws.blockchain.info/inv';\r\n  #websocket = null;\r\n\r\n  constructor() {\r\n    this.#websocket = new WebSocketAPI(this.#url);\r\n  }\r\n\r\n  async connect() {\r\n    return await this.#websocket.connect();\r\n  }\r\n\r\n  close() {\r\n    this.#websocket.close();\r\n  }\r\n\r\n  subscribe() {\r\n    this.#websocket.send({\r\n      \"op\": \"unconfirmed_sub\"\r\n    });\r\n  }\r\n\r\n  unsubscribe() {\r\n    this.#websocket.send({\r\n      \"op\": \"unconfirmed_unsub\"\r\n    });\r\n  }\r\n\r\n  async getTransaction(callback) {\r\n    this.#websocket.onMessage(callback); \r\n  }\r\n\r\n  async getAlert(callback) {\r\n    this.#websocket.onClose(callback);\r\n    this.#websocket.onError(callback);\r\n  }\r\n}","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"transactions-actions\"},[_c('button',{staticClass:\"button button-start\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.start}},[_vm._v(\" Запуск \")]),_c('button',{staticClass:\"button button-stop\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.stop}},[_vm._v(\" Остановка \")]),_c('button',{staticClass:\"button button-reset\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.reset}},[_vm._v(\" Сброс \")])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"transactions-actions\">\r\n    <button\r\n      class=\"button button-start\"\r\n      type=\"button\" \r\n      @click=\"start\"\r\n    >\r\n      Запуск\r\n    </button>\r\n    <button\r\n      class=\"button button-stop\"\r\n      type=\"button\"\r\n      @click=\"stop\"\r\n    >\r\n      Остановка\r\n    </button>\r\n    <button\r\n      class=\"button button-reset\"\r\n      type=\"button\"\r\n      @click=\"reset\"\r\n    >\r\n      Сброс\r\n    </button>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'TransactionsActions',\r\n  emits: ['start', 'stop', 'reset'],\r\n  methods: {\r\n    start() {\r\n      this.$emit('start');\r\n    },\r\n    stop() {\r\n      this.$emit('stop');\r\n    },\r\n    reset() {\r\n      this.$emit('reset');\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.transactions-actions {\r\n  display: flex;\r\n  justify-content: space-around;\r\n}\r\n.button {\r\n  border: 0;\r\n  border-radius: 5px;\r\n\r\n  padding: 10px;\r\n  width: 150px;\r\n\r\n  color: #fff;\r\n  font-size: 1.1rem;\r\n\r\n  cursor: pointer;\r\n}\r\n.button-start {\r\n  background-color: #52b41d;\r\n}\r\n.button-stop {\r\n  background-color: #dd5827;\r\n}\r\n\r\n.button-reset {\r\n  background-color: #ddb127;\r\n}\r\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./TransactionsActions.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./TransactionsActions.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TransactionsActions.vue?vue&type=template&id=b516ef4c&scoped=true&\"\nimport script from \"./TransactionsActions.vue?vue&type=script&lang=js&\"\nexport * from \"./TransactionsActions.vue?vue&type=script&lang=js&\"\nimport style0 from \"./TransactionsActions.vue?vue&type=style&index=0&id=b516ef4c&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b516ef4c\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"transactions-sum\"},[_vm._v(\" Сумма: \"+_vm._s(_vm._f(\"BTC\")(_vm.sum))+\" \")])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"transactions-sum\">\r\n    Сумма: {{ sum | BTC }} \r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  export default {\r\n    name: 'TransactionsSum',\r\n    props: {\r\n      sum: {\r\n        type: Number,\r\n        default: 0\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style>\r\n.transactions-sum {\r\n  font-size: 1.1rem;\r\n  text-align: center;\r\n  \r\n  margin-top: 50px;\r\n}\r\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./TransactionsSum.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./TransactionsSum.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TransactionsSum.vue?vue&type=template&id=28a70679&\"\nimport script from \"./TransactionsSum.vue?vue&type=script&lang=js&\"\nexport * from \"./TransactionsSum.vue?vue&type=script&lang=js&\"\nimport style0 from \"./TransactionsSum.vue?vue&type=style&index=0&id=28a70679&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('table',{staticClass:\"transaction-table\"},[_vm._m(0),_c('tbody',_vm._l((_vm.transactions),function({from, to, sum},tindex){return _c('tr',{key:`trns-${tindex}`},[_c('td',{staticClass:\"transaction-table-td\"},_vm._l((from),function(address,aindex){return _c('div',{key:`frmadd-${aindex}`},[_vm._v(_vm._s(address))])}),0),_c('td',{staticClass:\"transaction-table-td\"},_vm._l((to),function(address,aindex){return _c('div',{key:`toadd-${aindex}`},[_vm._v(_vm._s(address))])}),0),_c('td',{staticClass:\"transaction-table-td\"},[_vm._v(_vm._s(_vm._f(\"BTC\")(sum))+\" \")])])}),0)])\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('thead',[_c('tr',[_c('th',{staticClass:\"transaction-table-th\"},[_vm._v(\"From\")]),_c('th',{staticClass:\"transaction-table-th\"},[_vm._v(\"To\")]),_c('th',{staticClass:\"transaction-table-th\"},[_vm._v(\"Sum\")])])])\n}]\n\nexport { render, staticRenderFns }","<template>\r\n  <table class=\"transaction-table\">\r\n    <thead>\r\n      <tr>\r\n        <th class=\"transaction-table-th\">From</th>\r\n        <th class=\"transaction-table-th\">To</th>\r\n        <th class=\"transaction-table-th\">Sum</th>\r\n      </tr>\r\n    </thead>\r\n    <tbody>\r\n      <tr v-for=\"({from, to, sum}, tindex) in transactions\" :key=\"`trns-${tindex}`\">\r\n        <td class=\"transaction-table-td\">\r\n          <div v-for=\"(address, aindex) in from\" :key=\"`frmadd-${aindex}`\">{{address}}</div>\r\n        </td>\r\n        <td class=\"transaction-table-td\">\r\n          <div v-for=\"(address, aindex) in to\" :key=\"`toadd-${aindex}`\">{{address}}</div>\r\n        </td>\r\n        <td class=\"transaction-table-td\">{{sum | BTC}} </td>\r\n      </tr>\r\n    </tbody>\r\n  </table>\r\n\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'TransactionsTable',\r\n  props: {\r\n    transactions: {\r\n      type: Array, \r\n      required: true\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.transaction-table {\r\n  border-collapse: inherit;\r\n  border-spacing: 0;\r\n\r\n  margin: 30px auto;\r\n  width: 90vw;\r\n}\r\n.transaction-table-td,\r\n.transaction-table-th{\r\n  border: 1px solid gray;\r\n  padding: 20px;\r\n\r\n  text-align: center;\r\n}\r\n\r\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./TransactionsTable.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./TransactionsTable.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TransactionsTable.vue?vue&type=template&id=b92dccf2&scoped=true&\"\nimport script from \"./TransactionsTable.vue?vue&type=script&lang=js&\"\nexport * from \"./TransactionsTable.vue?vue&type=script&lang=js&\"\nimport style0 from \"./TransactionsTable.vue?vue&type=style&index=0&id=b92dccf2&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b92dccf2\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div class=\"transactionss\">\r\n    <h1>Bitcoin Transactions</h1>\r\n    <transactions-actions\r\n      @start=\"start\"\r\n      @stop=\"stop\"\r\n      @reset=\"reset\"\r\n    />\r\n    <transactions-sum\r\n      v-if=\"transactions.length\" \r\n      :sum=\"sum\"\r\n    />\r\n    <transactions-table\r\n      v-if=\"transactions.length\" \r\n      :transactions=\"transactions\"\r\n    />\r\n    <modal-dialog v-show=\"!!alerts.length\" @close=\"closeModal\">\r\n      <template #header>\r\n        Blockchain Connection Alerts\r\n      </template>\r\n      <div>\r\n        <div v-for=\"{id, type, message} in alerts\" :key=\"id\">\r\n          {{type}}: {{message}}\r\n        </div> \r\n      </div>\r\n    </modal-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { formatTransactionData } from '@/utils/transactions';\r\nimport TransactionsService from '@/services/TransactionsService';\r\nimport TransactionsActions from '@/components/transactions/TransactionsActions';\r\nimport TransactionsSum from '@/components/transactions/TransactionsSum';\r\nimport TransactionsTable from '@/components/transactions/TransactionsTable';\r\nimport ModalDialog from '@/components/ui/ModalDialog';\r\n\r\nexport default {\r\n  name: 'TransactionsView',\r\n  components: {\r\n    'transactions-actions': TransactionsActions,\r\n    'transactions-sum': TransactionsSum,\r\n    'transactions-table': TransactionsTable,\r\n    'modal-dialog': ModalDialog\r\n  },\r\n  data() {\r\n    return {\r\n      transactions: [],\r\n      alerts: [],\r\n      sum: 0\r\n    }\r\n  },\r\n  async created() {\r\n    this.service = new TransactionsService();\r\n    await this.service.connect();\r\n    window.addEventListener('beforeunload', this.service.close);\r\n  },\r\n  methods: {\r\n    start() {\r\n      this.service.subscribe();\r\n      this.service.getTransaction(this.addTransaction);\r\n      this.service.getAlert(this.addAlert);\r\n    },\r\n    stop() {\r\n      this.service.unsubscribe();\r\n    },\r\n    reset() {\r\n      this.transactions = [];\r\n    },\r\n    addTransaction(data) {\r\n      const formattedData = formatTransactionData(data);\r\n      this.transactions = [...this.transactions, formattedData];\r\n      this.sum += formattedData.sum;\r\n    },\r\n    addAlert(alertMessage) {\r\n      this.alerts = [...this.alerts,  {...alertMessage, id: Date.now()}];\r\n    },\r\n    closeModal() {\r\n      this.alerts = [];\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n  \r\n</style>\r\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./TransactionsView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./TransactionsView.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TransactionsView.vue?vue&type=template&id=a7b456e4&scoped=true&\"\nimport script from \"./TransactionsView.vue?vue&type=script&lang=js&\"\nexport * from \"./TransactionsView.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"a7b456e4\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","_v","on","start","stop","reset","transactions","length","attrs","sum","_e","directives","name","rawName","value","alerts","expression","closeModal","scopedSlots","_u","key","fn","proxy","_l","id","type","message","_s","staticRenderFns","getInputsInfo","inputs","inputsAddresses","sumInputsValue","input","addr","prev_out","push","getOutInfo","outs","outAddresses","sumOutValue","out","formatTransactionData","transactionData","x","profit","from","to","WebSocketAPI","constructor","url","connect","WebSocket","Promise","resolve","reject","onopen","readyState","OPEN","send","messageJSON","JSON","stringify","close","onMessage","callback","onmessage","e","data","parse","onClose","onclose","wasClean","console","log","code","reason","onError","onerror","error","TransactionsService","async","subscribe","unsubscribe","emits","methods","component","_f","props","default","_m","tindex","address","aindex","required","components","window","addTransaction","addAlert"],"sourceRoot":""}